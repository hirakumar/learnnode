$(document).ready(function(){
    $('.form-horizontal').on('submit',function(e){
       
            var data = {
                name : $(this).find('input#name'),
                email : $(this).find('input#email')
            }
            $.ajax({
                dataType : "json",
                method: "POST",
                url: $(this).attr('action'),
                contentType: "application/json; charset=utf-8",
                data:JSON.stringify(data),
                success : function(result) {
                    alert(result.msg);
                },
            });

        e.preventDefault();
    })
    $('#reguser').on('submit',function(e){
        console.log("trying to send data of reguser");
        var data = new FormData();
        data.append("username","myname");
        data.append("email","myemail@gslk.com");
        data.append("photo",$('#reguser input#photo')[0].files[0]);
        console.log($('#reguser input#photo')[0].files[0]);
       
        $.ajax({
            method: "POST",
            url: "/register/contest",
            contentType: "multipart/form-data",  
            data:data,
            processData: false,
            contentType: false,
            success : function(result) {
               console.log(result);
            },
            error : function(error){
                console.log("Error :", error);
            }
        });
        e.preventDefault();
    })

    $('#dob').datepicker({
        weekStart: 1,
        daysOfWeekHighlighted: "6,0",
        autoclose: true,
        todayHighlight: true,
    });
    $('#dob').datepicker("setDate", new Date());
 
    $('#signupForm').on('submit',function(e){
        console.log("Trying to submit signupform")
        var data = {
            username : $(this).find('#username').val(),
            useremail : $(this).find('#useremail').val(),
            designation : $(this).find('#designation').val(),
            qualification :$(this).find('#qualification').val(),
            dob:$(this).find('#dob').val(),
            citizenID:$(this).find('#citizenID').val(),
        }
        
        $.ajax({
            method:'POST',
            url:'/signup',
            dataType:'json',
            data:JSON.stringify(data),
            contentType: "application/json; charset=utf-8",
            success:function(response){
                console.log(response)
                $('#msgBox .modal-body').text(response.msg);
                $('#msgBox').modal('show');
                
            },
            error:function(error){
                console.log(error)
            }
        })
        e.preventDefault();
    })
})